<div class="center-content-container full-width">
  <div class="h1 title-wrapper">
    <h1>{{ (bookMeta | async).name }}</h1>
  </div>
  <mat-drawer-container class="example-container">
    <mat-drawer mode="side" opened
                [disableClose]="true"
    >
      <mat-nav-list>
        <a mat-list-item [routerLink]="link('content')" [routerLinkActive]="'active'">
          <mat-icon>apps</mat-icon> <span class="nav-caption">View content</span>
        </a>
        <a mat-list-item [routerLink]="link('comments')" [routerLinkActive]="'active'">
          <mat-icon [matBadge]="(commentsCount | async).toString()" matBadgePosition="above before">comment</mat-icon> <span class="nav-caption">Comments</span>
        </a>
        <a *ngIf="showAuth()" mat-list-item [routerLink]="link('security')" [routerLinkActive]="'active'">
          <mat-icon>security</mat-icon> <span class="nav-caption">Permissions</span>
        </a>
      </mat-nav-list>
    </mat-drawer>
    <mat-drawer-content>
      <app-books-preview *ngIf="(view | async) === 'content'"
        [pages]="pages | async"
        [bookCom]="book"
        [bookMeta]="bookMeta | async"
        [totalPages]="totalPages"
        [pageIndex]="pageIndex"
        (reload)="reload()"
        (pagesDeleted)="pagesDeleted($event)"
        (pagesChanged)="pagesChanged($event)"
        (bookMetaUpdated)="bookMetaUpdated($event)"
        (switchPagination)="switchPagination($event)"
      ></app-books-preview>
      <app-book-comments-view *ngIf="(view | async) === 'comments'"></app-book-comments-view>
      <app-book-security-view *ngIf="(view | async) === 'security'"></app-book-security-view>
    </mat-drawer-content>
  </mat-drawer-container>
</div>
