<p style="width: 1000px; height: 800px; background-color: lightgray" xmlns="http://www.w3.org/1999/html">
  <svg #svgRoot id="svgRoot"
       style="display: inline; width: inherit; min-width: inherit; max-width: inherit; height: inherit; min-height: inherit; max-height: inherit; "
       version="1.1"
       xmlns="http://www.w3.org/2000/svg" xmlns:xlink= "http://www.w3.org/1999/xlink">
    <image id="svgSheet"
           [attr.xlink:href]="sheetUrl"
           x="0" y="0"
           [attr.height]="sheetHeight"
           [attr.width]="sheetWidth"
           (keydown)="onKeypress($event)"
           (mousemove)="onMouseMove($event)"
           (mousedown)="onMouseDown($event)"
           (mouseup)="onMouseUp($event)"/>
    <g>
      <g  *ngFor="let staff of staffs.staffs">
        <rect
          class="aabb"
          [class.closest-staff]="staff==sheetOverlayService.closestStaffToMouse"
          [attr.x]="staff.aabb.origin.x"
          [attr.y]="staff.aabb.origin.y"
          [attr.width]="staff.aabb.size.w"
          [attr.height]="staff.aabb.size.h"
        />
        <g *ngFor="let staffLine of staff.lines">
          <rect
            class="aabb"
            [attr.x]="staffLine.aabb.origin.x"
            [attr.y]="staffLine.aabb.origin.y"
            [attr.width]="staffLine.aabb.size.w"
            [attr.height]="staffLine.aabb.size.h"
          />
          <polyline
            [attr.points]="staffLine.getPath()"
            class="staff-line" (mousemove)="null"
            (mousedown)="onStaffLineMouseDown($event, staffLine)"
            (mouseup)="onStaffLineMouseUp($event, staffLine)"
            (mousemove)="onStaffLineMouseMove($event, staffLine)"
          />
          <polyline
            [attr.points]="staffLine.getPath()"
            class="staff-line overlay" (mousemove)="null"
            (mousedown)="onStaffLineMouseDown($event, staffLine)"
            (mouseup)="onStaffLineMouseUp($event, staffLine)"
            (mousemove)="onStaffLineMouseMove($event, staffLine)"
          />
        </g>
        <g class="symbols">
          <g *ngFor="let symbol of staff.symbolList.symbols">
            <g *ngIf="symbol.type===symbolType.Note">
              <circle
                class='note'
                [attr.cx]="symbol.position.x"
                [attr.cy]="symbol.position.y"
                r="20"/>
            </g>

          </g>
        </g>
      </g>

    </g>
    <svg:g app-line-editor />
    <svg:g app-staff-grouper />
    <svg:g app-symbol-editor />
  </svg>
</p>
