<div
  *ngIf="line && sentence"
  id="text-editor-overlay"
  [style.left]="left + 'px'"
  [style.top]="top + 'px'"
  [style.min-width]="width + 'px'"
  cdkDrag
>

  <div mat-dialog-content>
    <mat-panel-title><b>{{ line.id }}</b></mat-panel-title>
    <mat-divider></mat-divider>
    <span>Available readings: {{ line.availableReadings.length }}</span>
    <mat-tab-group (selectedTabChange)="setActiveReading($event.tab.textLabel)">
      <mat-tab *ngFor="let readingName of line.availableReadings" label="{{ readingName }}">

        <div
            *ngIf="blockType === Mode.Lyrics"
            class="full-width">
              <textarea autocomplete="off"
                        #input name="text"
                        type="text"
                        [(ngModel)]="currentText"
                        (wheel)="$event.preventDefault()"
                        (mousedown)="$event.stopPropagation()"
              ></textarea>
        </div>

        <div
          *ngIf="blockType !== Mode.Lyrics"
          class="full-width">
          <textarea autocomplete="off"
                    #input name="text"
                    type="text"
                    [(ngModel)]="currentText"
                    (wheel)="$event.preventDefault()"
                    (mousedown)="$event.stopPropagation()"
          ></textarea>
        </div>
      </mat-tab>
    </mat-tab-group>

    <mat-slide-toggle [(ngModel)]="showVirtualKeyboard">Virtual keyboard</mat-slide-toggle>
    <app-virtual-keyboard *ngIf="showVirtualKeyboard" (buttonClicked)="insertAtCaret($event)" [url]="virtualKeyboardUrl" [storePermitted]="virtualKeyboardStoringPermitted"></app-virtual-keyboard>

    <!-- UI for adding a reading -->
    <div>
      <mat-form-field>
        <mat-label>Add reading:</mat-label>
        <input placeholder="Reading name" label="newReadingName" matInput
               [(ngModel)]="currentReadingNameToAdd">
        <mat-icon class="button icon"
                  matTooltip="Add reading"
                  matSuffix
                  (click)="addCurrentReading()">
          add
        </mat-icon>
      </mat-form-field>
    </div>
  </div>

</div>
